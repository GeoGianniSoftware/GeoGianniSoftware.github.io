"use strict";(self["webpackChunkfapia_app"]=self["webpackChunkfapia_app"]||[]).push([[803],{9803:(t,e,o)=>{o.r(e),o.d(e,{default:()=>y});var s=o(3673),a=o(8880),d=o(2323);const l=(0,s._)("h5",{class:"q-mt-none"},"Donations",-1),i={key:0,dense:"",separator:"",bordered:"",class:"addDonation q-pa-lg bg-white row"},n=(0,s.Uk)("Add Contribution");function u(t,e,o,u,r,c){const m=(0,s.up)("q-item-section"),w=(0,s.up)("q-btn"),h=(0,s.up)("q-input"),k=(0,s.up)("q-item"),p=(0,s.up)("q-item-label"),f=(0,s.up)("q-list"),x=(0,s.up)("q-page"),b=(0,s.Q2)("ripple");return(0,s.wg)(),(0,s.j4)(x,{class:"q-pa-lg bg-grey-3 column"},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{class:"row align-items"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[l])),_:1}),(0,s.Wm)(m,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{class:"q-mt-none",onClick:e[0]||(e[0]=(0,a.iM)((t=>c.showPassword()),["stop"])),flat:"",round:"",color:"dark",icon:"lock","text-color":"dark"})])),_:1}),1==this.showPasswordBox?((0,s.wg)(),(0,s.j4)(m,{key:0,side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{outlined:"",type:"password",modelValue:r.passwordText,"onUpdate:modelValue":e[1]||(e[1]=t=>r.passwordText=t),label:"Password"},null,8,["modelValue"])])),_:1})):(0,s.kq)("",!0),1==this.showPasswordBox?((0,s.wg)(),(0,s.j4)(m,{key:1,side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{class:"q-mt-none",onClick:e[2]||(e[2]=(0,a.iM)((t=>c.checkPassword()),["stop"])),flat:"",round:"",color:"dark",icon:"login","text-color":"dark"})])),_:1})):(0,s.kq)("",!0)])),_:1}),1==this.adminMode?((0,s.wg)(),(0,s.iD)("div",i,[(0,s.Wm)(k,{class:"justify-center row"},{default:(0,s.w5)((()=>[(0,s.Wm)(m,{style:{"max-width":"10rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"text-center text-h6",style:{"max-width":"1rem"}},{default:(0,s.w5)((()=>[n])),_:1})])),_:1}),(0,s.Wm)(m,{style:{"max-width":"20rem"}},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{outlined:"",modelValue:r.text,"onUpdate:modelValue":e[3]||(e[3]=t=>r.text=t),label:"Contributor Name"},null,8,["modelValue"])])),_:1}),(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,{modelValue:r.amount,"onUpdate:modelValue":e[4]||(e[4]=t=>r.amount=t),modelModifiers:{number:!0},type:"number",outlined:"",prefix:"$",suffix:" USD",min:"1",label:"Contribution Amount",style:{"max-width":"20rem"}},null,8,["modelValue"])])),_:1}),(0,s.Wm)(m,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{onClick:e[5]||(e[5]=t=>c.addNewTask()),push:"",color:"white",class:"text-black",size:"1.45rem",outlined:"",icon:"add",style:{"max-width":"3rem"}})])),_:1})])),_:1})])):(0,s.kq)("",!0),(0,s.Wm)(f,{class:"bg-white",separator:"",bordered:""},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.tasks,((t,e)=>(0,s.wy)(((0,s.wg)(),(0,s.j4)(k,{key:t.contributor,clickable:"",onClick:t=>this.selectedIndex=e,class:(0,d.C_)(c.getLeader(e))},{default:(0,s.w5)((()=>[(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"text-subtitle1"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,d.zw)(e+1)+"- "+(0,d.zw)(t.contributor)+":",1)])),_:2},1024)])),_:2},1024),(0,s.Wm)(m,null,{default:(0,s.w5)((()=>[this.amount>0?((0,s.wg)(),(0,s.j4)(w,{key:0,onClick:(0,a.iM)((t=>c.editTask(e)),["stop"]),flat:"",dense:"",color:"primary",icon:"add"},null,8,["onClick"])):(0,s.kq)("",!0)])),_:2},1024),this.selectedIndex==e&&this.adminMode?((0,s.wg)(),(0,s.j4)(m,{key:0,side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(w,{onClick:(0,a.iM)((t=>c.deleteTask(e)),["stop"]),flat:"",round:"",dense:"",color:"primary",icon:"delete","text-color":"negative"},null,8,["onClick"])])),_:2},1024)):(0,s.kq)("",!0),(0,s.Wm)(m,{side:""},{default:(0,s.w5)((()=>[(0,s.Wm)(p,{class:"text-h6 text-bold"},{default:(0,s.w5)((()=>[(0,s.Uk)("$ "+(0,d.zw)(c.getAmountFormatted(t.amount)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick","class"])),[[b]]))),128))])),_:1})])),_:1})}o(7565),o(4364),o(7098);var r=o(2490),c=o(8127);const m={data(){return{text:null,alertText:null,adminMode:!1,amount:null,selectedIndex:null,passwordText:"",correctPassword:"-1",showPasswordBox:!1,tasks:[]}},methods:{getLeader(t){return{top:0==t,second:1==t,third:2==t}},addNewTask(){this.amount,this.text;(0,c.ET)((0,c.hJ)(r["default"],"contributions"),{amount:this.amount,contributor:this.text});this.amount="",this.text=""},getAmountFormatted(t){const e=t.toLocaleString();return e},showPassword(){(0,c.JU)(r["default"],"data","info"),(0,c.QT)((0,c.JU)(r["default"],"data","info")).then((t=>{t.exists()?this.correctPassword=t.data().password:console.log("No such document!")}));this.showPasswordBox=!this.showPasswordBox},checkPassword(){this.passwordText==this.correctPassword&&-1!=this.correctPassword&&(this.adminMode=!0,this.showPasswordBox=!1)},deleteTask(t){let e={id:this.tasks.at(t).id};console.log(e.id),(0,c.oe)((0,c.JU)(r["default"],"contributions",""+e.id))},editTask(t){let e={amount:this.amount+this.tasks.at(t).amount,contributor:this.tasks.at(t).contributor};this.tasks.at(t).amount=e.amount,(0,c.pl)((0,c.JU)(r["default"],"contributions",this.tasks.at(t).id),e)}},mounted(){const t=(0,c.IO)((0,c.hJ)(r["default"],"contributions"),(0,c.Xo)("amount"));(0,c.cf)(t,(t=>{t.docChanges().forEach((t=>{let e=t.doc.data(),o={amount:e.amount,contributor:e.contributor,id:null};if("added"===t.type&&(console.log("New donation: ",t.doc.id),o.id=t.doc.id,this.tasks.unshift(o),this.tasks.sort(((t,e)=>t.amount>e.amount?-1:1))),"modified"===t.type&&(console.log("Modified donation: ",e),this.tasks.sort(((t,e)=>t.amount>e.amount?-1:1))),"removed"===t.type){let e=t.doc.id;var s=this.tasks.findIndex((t=>t.id===e));this.tasks.splice(s,1)}}))}))}};var w=o(4379),h=o(3414),k=o(2035),p=o(8240),f=o(6805),x=o(2350),b=o(7011),g=o(6489),_=o(7518),W=o.n(_);m.render=u;const y=m;W()(m,"components",{QPage:w.Z,QItem:h.Z,QItemSection:k.Z,QBtn:p.Z,QInput:f.Z,QItemLabel:x.Z,QList:b.Z}),W()(m,"directives",{Ripple:g.Z})}}]);